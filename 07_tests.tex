\chapter{Sensor tests}

%\section{Digital}
%    \subsection{Interface tests}
%    \subsection{Software tests}

\section{LDO}
    Voltage after LDO was measured in time, to calculate delay between power enable and measurement start. Time graph is shown on figure \ref{LDO_rise_time}. Delay was estimated to be around \SI{1}{\second}.

    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\paperwidth]{img/07/rise_time.png}
        \caption{LDO rise time}
        \label{LDO_rise_time}
    \end{figure}

\section{Current source}
    Current source was tested on HP 34970A - 6 1/2 digit multimeter, with 200 PLC enabled.

    \subsection{Noise}
        Noise of current source was measured for long period of time, taking sufficient number of samples. Results (\ref{Current_Stability}) shows that noise floor is below specifications for this meter.

        \begin{table}[H]
            \begin{center}
                \begin{tabular}{cc}
                    \includegraphics[width=0.35\paperwidth]{img/07/current_time.eps}
                    &
                    \includegraphics[width=0.35\paperwidth]{img/07/current_hist.eps}
                \end{tabular}
            \end{center}
            \caption{Current noise in time and histogram}
            \label{Current_Stability}
        \end{table}

    \subsection{Load range}
        Output load was changed in identical manner as in simulation, to tests its fidelity. Simulation and build model shown same range and stability - confirming the design. Current source works as intended for loads between \SI{1.4}{\kilo\ohm} and \SI{22.5}{\kilo\ohm} (figure \ref{Current_sensor_output_characteristics}).
        \begin{figure}[H]
            \centering
            \includegraphics[width=0.6\paperwidth]{img/07/output_resistance.eps}
            \caption{Current sensor output characteristics}
            \label{Current_sensor_output_characteristics}
        \end{figure}

    \subsection{Temperature stability}
        Temperature was swept from $20$ to \SI{70}{\degreeCelsius}, no detectable changes were measured by available meter, therefore it is assumed that current source changes lower than about \SI{20}{\nano\ampere} in this temperature range.

\section{MOS settling}
    After enabling measurement channel for threshold voltage it takes a lot of time to fully stabilize its value. Instead of pre-enabling, same time method was used. ADC takes measurement of threshold voltage at precisely specified time after enabling power. On figure \ref{MOS_settling} 10 runs of measured voltage vs time are plotted, proving this method is stable within \SI{20}{\uV}.

    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\paperwidth]{img/07/MOS_settling.eps}
        \caption{10 runs of MOS voltage setting}
        \label{MOS_settling}
    \end{figure}

\section{Measurement noise}
    \subsection{Diode}
    \subsection{Threshold voltage}

\section{Temperature characteristics}
    \subsection{Diode}
    \subsection{Threshold voltage}

\section{Temperature compensation stability}
